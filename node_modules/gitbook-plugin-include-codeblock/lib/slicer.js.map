{"version":3,"sources":["../src/slicer.js"],"names":["getSliceRange","hasSliceRange","sliceCode","label","regExp","matches","exec","slice","start","end","startOrUndefined","parseInt","undefined","endOrUndefined","range","code","untrimmed","slitted","split","length","sliced","join","trim"],"mappings":"AAAA;AACA;AACA;;;;;;;;;;;;AAYA;;;;;;;;;;;;QAKgBA,a,GAAAA,a;QAkBAC,a,GAAAA,a;QAcAC,S,GAAAA,S;AAhCT,SAASF,aAAT,CAAuBG,KAAvB,EAA8B;AACjC,QAAMC,SAAS,0CAAf;AACA,QAAMC,UAAUD,OAAOE,IAAP,CAAYH,KAAZ,CAAhB;AACA,QAAIE,YAAY,IAAhB,EAAsB;AAClB,eAAO,EAAP;AACH;AACD;;AANiC,yBAOZA,QAAQE,KAAR,CAAc,CAAd,EAAiB,CAAjB,CAPY;AAAA;AAAA,QAO1BC,KAP0B;AAAA,QAOnBC,GAPmB;;AAQjC,QAAMC,mBAAmBF,UAAU,EAAV,GAAeG,SAASH,KAAT,EAAgB,EAAhB,CAAf,GAAqCI,SAA9D;AACA,QAAMC,iBAAiBJ,QAAQ,EAAR,GAAaE,SAASF,GAAT,EAAc,EAAd,CAAb,GAAiCG,SAAxD;AACA,WAAO,CAACF,gBAAD,EAAmBG,cAAnB,CAAP;AACH;;AAED;;;;;AAKO,SAASZ,aAAT,CAAuBE,KAAvB,EAA8B;AACjC,QAAMW,QAAQd,cAAcG,KAAd,CAAd;;AADiC,gCAEZW,KAFY;AAAA,QAE1BN,KAF0B;AAAA,QAEnBC,GAFmB;;AAGjC,WAAOD,UAAUI,SAAV,IAAuBH,QAAQG,SAAtC;AACH;;AAED;;;;;;;;AAQO,SAASV,SAAT,CAAmBa,IAAnB,EAAyBP,KAAzB,EAAgCC,GAAhC,EAAqCO,SAArC,EAAgD;AACnD,QAAIR,UAAUI,SAAV,IAAuBH,QAAQG,SAAnC,EAA8C;AAC1C,eAAOG,IAAP;AACH;AACD,QAAME,UAAUF,KAAKG,KAAL,CAAW,IAAX,CAAhB;AACA,QAAIV,UAAUI,SAAd,EAAyB;AACrBJ,gBAAQ,CAAR;AACH;AACD,QAAIC,QAAQG,SAAZ,EAAuB;AACnBH,cAAMQ,QAAQE,MAAd;AACH;AACD,QAAMC,SAASH,QAAQV,KAAR,CAAcC,QAAQ,CAAtB,EAAyBC,GAAzB,EAA8BY,IAA9B,CAAmC,IAAnC,CAAf;AACA,WAAOL,YAAYI,MAAZ,GAAqBA,OAAOE,IAAP,EAA5B;AACH","file":"slicer.js","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/*\n format: [import:<start-lineNumber>-<end-lineNumber>](path/to/file)\n lineNumber start with 1.\n\n Patterns:\n\n All: [import, hello-world.js](../src/hello-world.js)\n 1-2: [import:1-2, hello-world.js](../src/hello-world.js)\n 2-3: [import:2-3, hello-world.js](../src/hello-world.js)\n 2>=: [import:2-, hello-world.js](../src/hello-world.js)\n <=3: [import:-3, hello-world.js](../src/hello-world.js)\n */\n/**\n * get range from label\n * @param {string} label\n * @returns {number[]}\n */\nexport function getSliceRange(label) {\n    const regExp = /^(?:include|import):(\\d*)-(\\d*)[,\\s]?.*$/;\n    const matches = regExp.exec(label);\n    if (matches === null) {\n        return [];\n    }\n    // return [undefined, undefined] if not matched, else contains [all,start,end].\n    const [start, end] = matches.slice(1, 3);\n    const startOrUndefined = start !== \"\" ? parseInt(start, 10) : undefined;\n    const endOrUndefined = end !== \"\" ? parseInt(end, 10) : undefined;\n    return [startOrUndefined, endOrUndefined];\n}\n\n/**\n * has range command in the label\n * @param {string} label\n * @returns {boolean}\n */\nexport function hasSliceRange(label) {\n    const range = getSliceRange(label);\n    const [start, end] = range;\n    return start !== undefined || end !== undefined;\n}\n\n/**\n * slice {@link code} with {@link start} and {@link end}\n * @param {string} code\n * @param {number|undefined} [start]\n * @param {number|undefined} [end]\n * @param {boolean|undefined} [untrimmed]\n * @returns {string}\n */\nexport function sliceCode(code, start, end, untrimmed) {\n    if (start === undefined && end === undefined) {\n        return code;\n    }\n    const slitted = code.split(\"\\n\");\n    if (start === undefined) {\n        start = 1;\n    }\n    if (end === undefined) {\n        end = slitted.length;\n    }\n    const sliced = slitted.slice(start - 1, end).join(\"\\n\");\n    return untrimmed ? sliced : sliced.trim();\n}\n"]}